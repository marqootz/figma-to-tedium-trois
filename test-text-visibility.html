<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Text Visibility Test</title>
  <style>
    /* Custom font declarations */
    @font-face {
      font-family: "CircularXX TT";
      src: url("fonts/CircularXXTT-Regular.ttf") format("truetype");
      font-weight: 400;
      font-style: normal;
      font-display: swap;
    }
    @font-face {
      font-family: "CircularXX TT";
      src: url("fonts/CircularXXTT-Bold.ttf") format("truetype");
      font-weight: 700;
      font-style: normal;
      font-display: swap;
    }

    /* Reset and base styles */
    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }
    
    body {
      font-family: "CircularXX TT", system-ui, -apple-system, sans-serif;
      background-color: #f5f5f5;
      padding: 20px;
      line-height: 1.5;
    }

    .test-container {
      background: white;
      padding: 20px;
      border-radius: 8px;
      box-shadow: 0 2px 10px rgba(0,0,0,0.1);
      margin-bottom: 20px;
      max-width: 800px;
    }

    .test-title {
      color: #333;
      margin-bottom: 10px;
      font-weight: 600;
    }

    .text-examples {
      border: 1px solid #ddd;
      padding: 20px;
      margin: 10px 0;
      background: #fafafa;
      border-radius: 4px;
    }

    /* Test text styles that should be generated by our system */
    .test-text-1 {
      font-family: "CircularXX TT", sans-serif;
      font-size: 16px;
      font-weight: 400;
      color: rgba(0, 0, 0, 1);
      line-height: 1.2;
      margin: 0;
      padding: 0;
      width: 200px;
      height: 20px;
      overflow: hidden;
    }

    .test-text-2 {
      font-family: "CircularXX TT", sans-serif;
      font-size: 24px;
      font-weight: 700;
      color: rgba(0, 0, 0, 1);
      line-height: 1.2;
      margin: 0;
      padding: 0;
      width: 300px;
      height: 30px;
      overflow: hidden;
    }

    .test-text-3 {
      font-family: "CircularXX TT", sans-serif;
      font-size: 14px;
      font-weight: 400;
      color: rgba(102, 102, 102, 1);
      line-height: 1.2;
      margin: 0;
      padding: 0;
      width: 150px;
      height: 18px;
      overflow: hidden;
    }
  </style>
</head>
<body>
  <h1>Text Visibility Test</h1>
  
  <div class="test-container">
    <h2 class="test-title">Testing Text Rendering</h2>
    <p>This test verifies that text elements are properly visible with the styling that should be generated by our system.</p>
    
    <div class="text-examples">
      <p class="test-text-1" data-figma-id="test-1" data-figma-name="Sample Text" data-figma-type="TEXT">
        This is sample text (16px, Regular)
      </p>
      <p class="test-text-2" data-figma-id="test-2" data-figma-name="Bold Text" data-figma-type="TEXT">
        This is bold text (24px, Bold)
      </p>
      <p class="test-text-3" data-figma-id="test-3" data-figma-name="Gray Text" data-figma-type="TEXT">
        This is gray text (14px, Regular)
      </p>
    </div>
  </div>

  <div class="test-container">
    <h2 class="test-title">Debug Information</h2>
    <div id="debug-info">
      <p>Checking text element properties...</p>
    </div>
  </div>

  <script>
    console.log('Text Visibility Test Loaded');
    
    // Check if fonts are loading
    document.fonts.ready.then(() => {
      console.log('Fonts loaded successfully');
      
      // Test font availability
      const testElement = document.createElement('span');
      testElement.style.fontFamily = '"CircularXX TT"';
      testElement.textContent = 'Test';
      document.body.appendChild(testElement);
      
      const computedStyle = window.getComputedStyle(testElement);
      console.log('Font family used:', computedStyle.fontFamily);
      
      document.body.removeChild(testElement);
    });
    
    // Analyze text elements
    const textElements = document.querySelectorAll('p[data-figma-type="TEXT"]');
    const debugInfo = document.getElementById('debug-info');
    
    let debugHTML = '<h3>Text Element Analysis:</h3>';
    
    textElements.forEach((element, index) => {
      const style = window.getComputedStyle(element);
      const rect = element.getBoundingClientRect();
      
      console.log(`Text element ${index + 1}:`, {
        id: element.getAttribute('data-figma-id'),
        name: element.getAttribute('data-figma-name'),
        content: element.textContent,
        fontFamily: style.fontFamily,
        fontSize: style.fontSize,
        fontWeight: style.fontWeight,
        color: style.color,
        width: style.width,
        height: style.height,
        rectWidth: rect.width,
        rectHeight: rect.height,
        visible: rect.width > 0 && rect.height > 0
      });
      
      debugHTML += `
        <div style="border: 1px solid #ddd; padding: 10px; margin: 10px 0; background: #f9f9f9;">
          <strong>Element ${index + 1}:</strong> ${element.getAttribute('data-figma-name')}<br>
          <strong>Content:</strong> "${element.textContent}"<br>
          <strong>Font:</strong> ${style.fontFamily} ${style.fontSize} ${style.fontWeight}<br>
          <strong>Color:</strong> ${style.color}<br>
          <strong>Dimensions:</strong> ${style.width} × ${style.height}<br>
          <strong>Actual Size:</strong> ${rect.width.toFixed(1)}px × ${rect.height.toFixed(1)}px<br>
          <strong>Visible:</strong> ${rect.width > 0 && rect.height > 0 ? '✅ Yes' : '❌ No'}
        </div>
      `;
    });
    
    debugInfo.innerHTML = debugHTML;
  </script>
</body>
</html>
